---
title: "[Java] TCP/IP 프로토콜과 전송계층 프로토콜 비교(TCP, UDP)"
author: "김소연"
date: 2023-07-08 19:00:00 -0500
categories: [Language, Java]
tags: [Java]
---



TCP/IP 프로토콜은 Ethernet, IP, TCP, HTTP 등의 개념을 포함하고 있습니다.



## 통신모델

![tcpIp](/assets/img/tcpIp.png){:width="80%" height="80%"}

최초의 개념으로 OSI 모델부터 시작하였습니다.



### OSI 모델

![tcpIp2](/assets/img/tcpIp2.png){:width="80%" height="80%"}

데이터를 처음으로 전송하는 호스트는 응용 계층부터 물리 계층까지 데이터를 캡슐화합니다. 그리고 물리 계층에서는 통신 회선을 통해 이웃하는 네트워크 장치에게 전달합니다. 

데이터를 전송하기 위한 경로를 설정하고 판단하는 라우터에서는 목적지가 지역망의 호스트인지 확인합니다. 만약 지역 망의 호스트라면 지역 호스트에게 전달하고, 그렇지 않다면 라우터에게 전달합니다.

목적 호스트는 물리계층으로부터 수신하여 응용 계층까지 디캡슐화해서 상대가 보낸 데이터를 받습니다.



#### 계층별 역할

- 물리 계층
  통신 회선을 통해 비트 스트림을 전달하는 역할을 수행합니다. 이는 회선의 인터페이스와 물리 매체에 따른 전자적인 규격을 따릅니다.
- 데이터 링크 계층
  물리 계층에 도착한 비트 스트림을 네트워크 계층으로 전달하고, 네터워크 계층의 패킷을 물리 계층으로 전달하는 역할을 수행합니다. 
  데이터 계층의 데이터는 프레임(Frame)이라고 부릅니다. 프레임에는 물리 주소 정보를 포함하고 있습니다.
- 네트워크 계층
  통신에 사용하는 논리 주소(예: IP 주소)를 지정하고 송신자와 수신자 사이에 경로를 지정하는 역할을 수행합니다. 
  네트워크 계층의 데이터를 패킷(Packet)이라고 부릅니다. 패킷에는 논리 주소 정보를 포함하고 있습니다.
- 전송 계층
  프로세스 별로 구분하는 역할을 담당합니다. 따라서 발신지와 목적지의 프로세스 간의 메시지 전달 책임을 맡고 있는 것입니다. 이를 통해 연결을 제어하고, 흐름을 제어합니다. 
  전송 계층의 데이터를 메시지(Message)라고 부릅니다. 메시지에는 서비스 지점 주소 정보와 연결 및 흐름 제어에 필요한 정보를 포함하고 있습니다.
- 세션 계층
  통신 시스템 사이에 대화를 설정하고 동기화 역할을 담당합니다.
- 표현 계층
  암호화 및 암축 및 부호화 역할을 수행합니다.
- 응용 계층
  실질적인 서비스(예: 전자메일, 파일전송 등)을 담당합니다.



### 인터넷 프로토콜 스위트

인터넷에서 TCP/IP 프로토콜이 차지하는 비중이 커지면서 OSI 7계층을 모두 구현하지 않았습니다. 이러한 이유로 TCP/IP 프로토콜을 중심으로 인터넷 프로토콜 스위트로 통신 계층을 표현하였습니다. 그리고 이를 TCP/IP 프로토콜 스위트라고도 합니다.
인터넷 프로토콜 스위트는 OSI 모델에서 실제 역할에 맞게 상위 3계층을 응용 계층으로 통합하였습니다. 따라서 인터넷 프로토콜 스위트는 5계층으로 구성하여 TCP/IP 5계층으로 부릅니다.



### DoD(Department of Defence)

TCP/IP를 개발한 미 국방성 DARPA에서는 4계층으로 분류하였는데 이는 DoD입니다. 그리고 이를 TCP/IP 프로토콜 4계층이라고도 합니다.
DoD 모델에서는 물리 계층과 데이터 링크 계층이 네트워크 인터페이스 계층입니다. 이로인해 계층별로 프로토콜을 나누기 쉽습니다.



## 계층별 프로토콜

### 네트워크 인터페이스 계층에는 

- Ethernet
- Token Ring 프로토콜 

등이 있습니다.



### 인터넷 계층에는 

- 호스트 주소를 지정하는 IP 프로토콜
- 주소를 변환하는 ARP와 RARP 프로토콜
- IP 프로토콜 제어를 담당하는 ICMP 프로토콜
- 멀티 캐스팅을 지원하는 IGMP 프로토콜
- 라우팅 프로토콜인 OSPF 프로토콜 

등이 있습니다.



### 전송 계층에는

- 신뢰성 있는 스트림 방식의 TCP 프로토콜
- 데이터 그램 방식의 UDP 프로토콜이 있습니다.



### 응용 계층에는

- 도메인 네임 서비스를 제공하는 DNS 프로토콜
- 동적 호스트 설정 서비스를 제공하는 DHCP 프로토콜
- 가상 터미널 서비스를 제공하는 TELNET 프로토콜
- 파일 전송 서비스를 제공하는 FTP 프로토콜
- 웹에서의 하이퍼텍스트 전송 서비스를 제공하는 HTTP 프로토콜
- 메시지 전송 서비스를 제공하는 SMTP 

등이 있습니다.



## 네트워크 인터페이스 계층(TCP/IP 프로토콜 기준)

### Ethernet

이더넷은 OSI 모델 기준으로 데이터 링크 계층을 담당합니다. 네트워크 장치마다 부여하는 MAC 주소를 가지고 실제 물리 회선을 통해 프레임을 주고받는 것을 담당합니다. 



## 인터넷계층

### IPv4

IP(인터넷 프로토콜)는 TCP/IP 통신에서 네트워크 계층을 담당합니다. TCP/IP 통신에서 네트워크 엔티티를 구분하는 주소를 결정하는 역할을 담당하는 것을 의미합니다. 

IP 프로토콜에서는 패킷 교환 방식으로 목적지까지 패킷을 전달합니다. 
이는 전송자와 수신자 사이에 연결을 유지하지 않는 상태에서 패킷 단위로 전송함을 의미합니다. 
이로 인해 보낸 순서와 수신한 순서가 바뀔 수도 있고 제대로 전송하지 못하는 패킷이 존재할 수도 있습니다. 하지만 이로 인해 발생하는 문제를 해결하는 것은 IP 프로토콜에서 처리하지 않고 상위 계층인 전송 계층 프로토콜(TCP, UDP)에서 처리합니다.

또한 IP 패킷을 전송할 때 망에 따라 한 번에 전송할 수 있는 최대 패킷의 크기가 다른 특징으로 인하여 원래 하나의 패킷으로 보내려고 했던 것을 여러 개로 분할하여 보내야 할 때도 있습니다.

#### IPv4 주소

- 32비트(4바이트) 길이
- 1바이트씩 나눠서 4개의 값을 점을 통해 구분합니다.
- 4개의 각 부분은 0 부터 255까지 값을 가집니다. (1바이트 각각 최소값과 최대값)

#### 클래스 구분

네트워크 주소와 호스트 주소로 나눠서 구분합니다. 호스트들이 같은 네트워크 주소에 있을 경우 네트워크 주소는 같은 값을 가지고 호스트 주소를 통해 구분합니다.

이 때 네트워크 크기에 따라 호스트의 개수를 다르게 다룰 수 있게 CLASS A부터 CLASS E까지 정의하고 있습니다.
A클래스는 호스트 주소를 구분하는 영역이 24비트여서 제일 많은 호스트로 구성하는 네트워크에 사용할 수 있어 국가나 대형망에 사용합니다. B클래스는 중대형 망에 사용하며 호스트 주소는 16비트입니다. C클래스는 소규모 망에서 사용하며 호스트 주소는 8비트입니다.



## 전송계층

### TCP(Transmission Control Protocol)

TCP는 두 개의 호스트를 연결하고 데이터 스트림을 교환하게 해주는 Stream 기반 프로토콜입니다. 
인터넷상에서 데이터를 메세지의 형태로 보내기 위해 IP와 함께 사용합니다.
3-way handshaking과정을 통해 연결을 설정하고 4-way handshaking을 통해 해제합니다.

#### 특징

- TCP는 데이터와 패킷이 보내진 순서대로 전달하는 것을 보장해줍니다.(순차전송 보장, 흐름제어, 혼잡제어) 에러가 없이 패킷이 신뢰할 수 있게 전달 되었는지 보증해 주는 것입니다. (신뢰성 보장)
- 동시제어가 가능합니다. 이는 초기 요청이 작게 시작해도 컴퓨터들과 서버들의 대역폭의 깊이가 증가해도 네트워크가 지원할 수 있다는 것을 뜻한다.

👉 이메일이나 채팅 애플리케이션 등 신뢰성있는 전송이 중요할 때에 사용한다.

#### 문제점

신뢰성은 보장하지만 매번 connection을 연결해서 시간 손실 발생, 패킷을 조금만 손실해도 재전송이 발생된다.

👉 예를들어 원본사진과 조금 수정된 사진이 있을때 티가 거의 나지 않더라도 다시 재전송을 하게되는데, 서비스에 따라서 불합리한 손실을 발생시킬 수 있게 된다.



### UDP(User Datagram Protocol)

데이터를 데이터그램 단위로 처리하는 프로토콜입니다. 

TCP와는 다르게 비연결형 프로토콜로, 연결을 설정하거나 해제하는 과정이 존재하지 않습니다.

#### 특징

- 신뢰성이 낮지만 TCP보다 일반적으로 속도가 빠릅니다.
- 순차전송 보장 X, 흐름제어 X, 혼잡제어 X
- 커넥션을 끊은 상태로 다방향으로 연결을 한다. 그래서 각각 패킷들이 독립적이고, 각각 독립적인 경로로 전송된다.

👉 신뢰성보다는 연속성, 성능이 중요한 실시간 서비스나 영상 스트리밍(사진의 연속)에 사용합니다.



### TCP와 UDP 비교

| 프로토콜 종류  |        TCP         |            UDP            |
| :------------: | :----------------: | :-----------------------: |
|   연결 방식    |   연결형 서비스    |      비연결형 서비스      |
| 패킷 교환 방식 |   가상 회선 방식   |      데이터그램 방식      |
|   전송 순서    |   전송 순서 보장   | 전송 순서가 바뀔 수 있음  |
| 수신 여부 확인 | 수신 여부를 확인함 | 수신 여부를 확인하지 않음 |
|   통신 방식    |      1:1 통신      |  1:1 or 1:N or N:N 통신   |
|     신뢰성     |        높다        |           낮다            |
|      속도      |       느리다       |          빠르다           |



## 출처

- https://valueelectronic.tistory.com/m/89
- https://developer.mozilla.org/ko/docs/Glossary/TCP
- https://velog.io/@seul06/TIL-웹의-동작-방식-TCP와-UDP