<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[Web] 쿠키와 세션" /><meta name="author" content="김소연" /><meta property="og:locale" content="en" /><meta name="description" content="HTTP는 Connectionless, Stateless 하다는 특징이 있습니다." /><meta property="og:description" content="HTTP는 Connectionless, Stateless 하다는 특징이 있습니다." /><link rel="canonical" href="https://km-so-yeon.github.io/posts/Web-Cookie-Session/" /><meta property="og:url" content="https://km-so-yeon.github.io/posts/Web-Cookie-Session/" /><meta property="og:site_name" content="포스트잇" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-07-21T09:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Web] 쿠키와 세션" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@김소연" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"김소연"},"dateModified":"2023-07-31T23:34:05+09:00","datePublished":"2023-07-21T09:00:00+09:00","description":"HTTP는 Connectionless, Stateless 하다는 특징이 있습니다.","headline":"[Web] 쿠키와 세션","mainEntityOfPage":{"@type":"WebPage","@id":"https://km-so-yeon.github.io/posts/Web-Cookie-Session/"},"url":"https://km-so-yeon.github.io/posts/Web-Cookie-Session/"}</script><title>[Web] 쿠키와 세션 | 포스트잇</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="포스트잇"><meta name="application-name" content="포스트잇"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/picture.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">포스트잇</a></div><div class="site-subtitle font-italic">오늘보다 나은</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/km-so-yeon" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Web] 쿠키와 세션</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Web] 쿠키와 세션</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> 김소연 </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Jul 21, 2023, 9:00 AM +0900" >Jul 21<i class="unloaded">2023-07-21T09:00:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Jul 31, 2023, 11:34 PM +0900" >Jul 31<i class="unloaded">2023-07-31T23:34:05+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4518 words">25 min read</span></div></div><div class="post-content"><p>HTTP는 Connectionless, Stateless 하다는 특징이 있습니다.</p><ul><li>Connectionless는 클라이언트가 요청을 한 후 응답을 받으면 연결을 끊어버린다.<li>Stateless는 클라이언트의 상태 정보를 가지지 않는다. 클라이언트와 첫 번째 통신에서 데이터를 주고받았다 해도, 다음에 이전 데이터를 유지하지 않는다.</ul><p>우리가 페이지를 이동하더라도 로그인 상태를 유지하거나, 장바구니에 넣은 목록을 유지하는 등 데이터를 유지할 필요가 있습니다. 이 때 HTTP의 Connectionless, Stateless한 점을 보완하여 클라이언트가 누군지 확인하고, 데이터를 유지하기 위해 쿠키와 세션을 사용합니다.</p><p>쿠키와 세션에 대해서 알아보고, JSP에서 어떻게 사용하는지 알아보겠습니다.</p><h2 id="쿠키">쿠키</h2><p><strong>웹 브라우저가 보관</strong>하는 데이터</p><ul><li>웹 서버와 웹 브라우저 양쪽에서 생성할 수 있다.</ul><h3 id="쿠키-동작-방식">쿠키 동작 방식</h3><ol><li>쿠키 생성 단계 : JSP 쿠키는 웹 서버 측에서 생성한다. 생성한 쿠키를 응답 데이터의 헤더에 저장해서 웹 브라우저에 전송한다.<li>쿠키 저장 단계 : 웹 브라우저는 응답 데이터에 포함된 쿠키를 쿠키 저장소에 보관한다. 쿠키의 종류에 따라 메모리나 파일에 저장한다.<li>쿠키 전송 단계 : 웹 브라우저는 매번 저장된 쿠키를 Header에 포함해서 요청을 보낸다. 웹 서버는 쿠키를 사용해서 필요한 작업을 수행한다.</ol><h3 id="쿠키-구성-요소">쿠키 구성 요소</h3><ul><li>이름 : 각각의 쿠키를 구별하는데 사용하는 이름<li>값 : 쿠키의 이름과 관련된 값<li>유효시간 : 쿠키의 유지시간<li>도메인 : 쿠키를 전송할 도메인<li>경로 : 쿠키를 전송할 요청 경로</ul><p>이름은 보통 알파벳과 숫자만 사용한다. 유효시간 뒤에 쿠키가 삭제되고, 유효시간이 지정되어있지 않을 경우 웹 브라우저를 종료할 때 삭제된다. 지정한 도메인이나 경로로만 전송하도록 제한할 수 있다.</p><h3 id="쿠키-생성하기">쿠키 생성하기</h3><p><code class="language-plaintext highlighter-rouge">Cookie</code> 클래스 사용</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cookie</span><span class="o">(</span><span class="s">"cookieName"</span><span class="o">,</span> <span class="s">"cookieValue"</span><span class="o">);</span>
<span class="n">response</span><span class="o">.</span><span class="na">addCookie</span><span class="o">(</span><span class="n">cookie</span><span class="o">);</span>
</pre></table></code></div></div><ol><li>쿠키 객체 생성<li>쿠키 추가(웹 브라우저에 쿠키 정보를 전송한다)<ul><li>쿠키의 도메인과 경로는 도메인 간에 또는 특정 요청 경로에 위치한 JSP 간에 쿠키를 공유할 때 필요하다.</ul></ol><h3 id="쿠키-값-변경">쿠키 값 변경</h3><p>같은 이름의 쿠키를 새로 생성해서 응답 데이터로 보내면 된다.</p><ul><li>쿠키 값 존재 여부 확인 후 처리해줘도 된다.</ul><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">cookies</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
	<span class="k">if</span><span class="o">(</span><span class="n">cookies</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"name"</span><span class="o">))</span> <span class="o">{</span>	<span class="c1">// "name" 쿠키 값 존재 여부 확인</span>
		<span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cookie</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="s">"JSP프로그래밍"</span><span class="o">,</span> <span class="s">"utf-8"</span><span class="o">));</span>
		<span class="n">response</span><span class="o">.</span><span class="na">addCookie</span><span class="o">(</span><span class="n">cookie</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="쿠키-삭제">쿠키 삭제</h3><p>유효 시간을 0으로 지정해준 뒤 응답 데이터로 보낸다.</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cookie</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"value"</span><span class="o">);</span>
<span class="n">cookie</span><span class="o">.</span><span class="na">setMaxAge</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="n">response</span><span class="o">.</span><span class="na">addCookie</span><span class="o">(</span><span class="n">cookie</span><span class="o">);</span>
</pre></table></code></div></div><h3 id="쿠키의-도메인">쿠키의 도메인</h3><ul><li>기본적으로 쿠키는 그 쿠키를 생성한 서버에만 전송된다. www.somehost.com 👉 www.somehost.com<li><code class="language-plaintext highlighter-rouge">setDomain()</code> 사용해서 생성한 쿠키를 전송할 수 있는 도메인을 지정할 수 있다.<ul><li><code class="language-plaintext highlighter-rouge">.</code> 점으로 시작하는 경우 관련 도메인에 모두 쿠키를 전송한다. (<strong>쿠키의 범위 확장</strong>) .somehost.com 👉 www.somehost.com / mail.somehost.com / javacan.somehost.com<li>점이 아닌 문자로 시작하는 경우 해당 도메인에만 쿠키를 전송한다. www.somehost.com 👉 www.somehost.com<li>설정하지 않으면 그 쿠키를 생성한 해당 도메인에만 쿠키를 전송한다.</ul><li>도메인에 대한 예제를 테스트할 때 C:\Windows\System32\drivers\etc 폴더의 host 파일을 수정한다. 127.0.0.1 javacan.somehost.com</ul><h4 id="도메인에-따른-쿠키의-종류">도메인에 따른 쿠키의 종류</h4><ul><li>브라우저 쿠키<ul><li>기본적으로 쿠키를 보낸 서버가 속한 도메인으로만 쿠키를 되돌려 보낸다. 이런 경우 해당 URL에서만 쿠키를 사용한다.</ul><li>도메인 쿠키<ul><li>Domain 파라미터를 설정하면 서브 도메인까지 쿠키를 보내서 쿠키를 공유할 수 있게 된다.<li>naver.com 으로 설정한다면 a.naver.com 또는 b.naver.com으로 보낸다.</ul></ul><h3 id="쿠키의-경로">쿠키의 경로</h3><ul><li>경로는 URL에서 서버 주소 이후 부분인 디렉터리 부분이다. URL : https://localhost:8080/chap09/path2/viewCookies.jsp 경로 : /chap09/path2/viewCookies.jsp<li>쿠키에서 사용하는 경로는 디렉터리 수준까지의 경로를 사용한다. 예 : <code class="language-plaintext highlighter-rouge">/</code> or <code class="language-plaintext highlighter-rouge">/chap09</code> or <code class="language-plaintext highlighter-rouge">/chap09/path2</code><li><code class="language-plaintext highlighter-rouge">setPath()</code> 를 사용해서 쿠키의 경로를 지정할 수 있다.<ul><li>설정한 경로와, 하위 경로까지 전송한다. (<strong>쿠키의 범위 축소</strong>)<li>설정하지 않으면 실행한(쿠키를 보냈던) URL의 경로 부분을 사용한다.</ul></ul><h3 id="쿠키의-유효시간">쿠키의 유효시간</h3><ul><li>쿠키는 유효시간을 갖는다.<li>유효시간을 지정하지 않으면 웹 브라우저를 종료할 때 쿠키를 함께 삭제한다. 웹 브라우저 종료 후 다시 웹 브라우저를 실행하면 삭제한 쿠키는 서버에 전송되지 않는다.<li>유효시간을 지정하면 그 유효시간동안 쿠키가 존재하고, 웹 브라우저를 종료해도 유효시간이 지나지 않으면 쿠키를 삭제하지 않는다.<li><code class="language-plaintext highlighter-rouge">setMaxAge()</code> 를 사용해서 유효시간을 지정한다.<ul><li>초 단위로 지정한다. (1시간 = 60*60)</ul><li>아이디 기억하기 기능을 구현할 때 쿠키를 사용한다.<ul><li>사용자가 로그인에 성공하면 아이디를 값으로 저장하고 있는 쿠키의 유효시간을 여유롭게 잡아서 생성한다. 그러면 다음에 웹 브라우저를 실행할 때 아이디를 저장하고 있는 쿠키를 사용할 수 있다.</ul></ul><h4 id="유효기간에-따른-쿠키의-종류">유효기간에 따른 쿠키의 종류</h4><ul><li>세션(Session) 쿠키<ul><li>브라우저를 닫으면 사라지는 쿠키(유효기간이 없다)<li>탭으로 나뉘어져있어도 쿠키가 공유된다</ul><li>영속(Persistent) 쿠키<ul><li>브라우저를 닫아도 유효기간까지 저장되는 쿠키<li>디스크에 저장되며 컴퓨터를 재시작해도 남아있다<li>사용자 로그인 유지에 사용된다</ul><li>Session 쿠키와 Persistent 쿠키의 차이점<ul><li>Discard 파라미터가 true(디스크에 저장)이거나, Expires(종료시점), Max-age(유효기간) 파라미터가 설정되어 있으면 Persistent 쿠키이다.</ul></ul><h3 id="쿠키와-헤더">쿠키와 헤더</h3><ul><li><code class="language-plaintext highlighter-rouge">response.addCookie()</code> 로 쿠키를 추가하면 Set-Cookie 헤더를 통해 전달된다.<li>한 개의 Set-Cookie 헤더는 한 개의 쿠키 값을 전달한다.<li>Set-Cookie 헤더의 구성 <code class="language-plaintext highlighter-rouge">Set-Cookie: 쿠키이름=쿠키값; Domain=도메인값; Path=경로값; Expires=GMT형식의만료일시</code></ul><h2 id="세션">세션</h2><p><strong>서버(웹 컨테이너)가 보관</strong>하는 데이터</p><ul><li>웹 컨테이너는 기본적으로 한 웹 브라우저마다 한 세션을 생성한다. 👉 웹 브라우저와 관련된 정보를 저장하기 알맞은 장소이다.<li>같은 JSP 페이지어도 웹 브라우저에 따라 서로 다른 세션을 사용한다.<li>로그인한 사용자의 정보를 유지하기 위한 목적으로 세션을 사용한다.</ul><h3 id="세션-생성하기">세션 생성하기</h3><ul><li>page 디렉티브의 session 속성을 true로 지정한다.<ul><li><code class="language-plaintext highlighter-rouge">&lt;%@ page session="true" %&gt;</code><li>기본값이 true이므로 session 속성값을 false로 지정하지만 않으면 세션이 생성된다.</ul><li>세션을 생성하면 session 기본 객체를 통해 세션을 사용할 수 있다.<li>서버 프로그램에 웹 브라우저가 처음 접속할 때 세션을 생성하고, 이후로는 이미 생성된 세션을 사용한다.</ul><h3 id="session-기본-객체">session 기본 객체</h3><p>session 기본 객체는 request 기본 객체와 마찬가지로 속성을 제공하므로 메서드를 사용하여 속성값을 저장하거나 읽어올 수 있다.</p><h4 id="메서드">메서드</h4><div class="table-wrapper"><table><thead><tr><th>메서드<th>설명<tbody><tr><td>String getId()<td>세션의 고유 ID(세션ID)를 구한다.<tr><td>long getCreationTime()<td>세션이 생성된 시간을 구한다.<tr><td>long getLastAccessedTime()<td>웹 브라우저가 가장 마지막에 세션에 접근한 시간을 구한다.</table></div><ul><li>시간을 구할 때 1970년 1월 1일 이후 흘러간 시간을 의미하고, 단위를 1/1000초로 가져온다. 이를 보기 편하게 출력하기 위해 아래와 같은 방법을 사용한다.</ul><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">Date</span> <span class="n">time</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">();</span>
<span class="nc">SimpleDateFormat</span> <span class="n">formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SImpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd HH:mm:ss"</span><span class="o">);</span>
<span class="n">time</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="n">session</span><span class="o">.</span><span class="na">getCreateTime</span><span class="o">());</span>
<span class="n">formatter</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">time</span><span class="o">);</span>
</pre></table></code></div></div><ul><li>웹 브라우저마다 별도의 세션을 구분하기 위해 각 세션마다 할당하는 고유 ID를 <strong>세션 ID</strong>라고 한다.<ul><li>웹 서버가 웹 브라우저에 세션 ID를 전송한다.<li>웹 브라우저는 웹 서버에 연결할 때마다 매번 세션 ID를 보내서 웹 서버가 어떤 세션을 사용할지 판단할 수 있게 한다.<li>웹 서버와 웹 브라우저는 세션ID를 공유하기 위해 쿠키를 사용한다. (JSESSIONID 쿠키를 이때 사용한다.)</ul></ul><h4 id="속성-사용">속성 사용</h4><p>로그인한 회원 정보 등 웹 브라우저와 일대일로 관련된 값을 저장할 때 쿠키 대신 세션을 사용할 수 있다.</p><ul><li>중요한 데이터를 저장할 때 알맞은 장소이다.<li>쿠키를 지원하지 않을 경우 사용할 수 있다.<li>여러 서버에서 공유할 수 없다.</ul><p><code class="language-plaintext highlighter-rouge">setAttribute()</code> 를 사용해서 속성에 값을 저장한다.</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"NAME"</span><span class="o">,</span> <span class="s">"김소연"</span><span class="o">);</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">getAttribute()</code> 를 사용해서 속성값을 읽는다.</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"NAME"</span><span class="o">);</span>
</pre></table></code></div></div><h3 id="세션-종료">세션 종료</h3><p><code class="language-plaintext highlighter-rouge">session.invalidate()</code> 를 사용해서 세션을 종료한다.</p><ul><li>현재 사용 중인 session 기본 객체를 삭제하고, 저장했던 속성 목록도 함께 삭제한다.<li>세션 종료 후 다음 요청에서 session을 사용하면 새로운 session 기본 객체를 생성한다.</ul><h3 id="세션-유효시간">세션 유효시간</h3><p>세션은 최근 접근 시간을 갖는다.</p><ul><li>세션을 사용하도록 설정된 JSP 페이지에 접근할 때마다 세션의 최근 접근 시간을 변경한다.<li>세션은 마지막 접근 이후 일정 시간 이내에 다시 세션에 접근하지 않는 경우 자동으로 세션을 종료하는 기능을 갖고 있다. (이후 세션을 요청하면 새로운 세션 생성)</ul><h4 id="세션-유효시간-설정하는-두가지-방법">세션 유효시간 설정하는 두가지 방법</h4><ol><li>WEB-INF\web.xml 파일에 <code class="language-plaintext highlighter-rouge">&lt;session-config&gt;</code> 태그를 사용하여 세션 유효 시간을 지정한다. (값의 단위는 분이다.)<ul><li>0이나 음수로 설정할 경우 유효시간을 갖지 않는다.<li>invalidate() 호출 전까지 세션 객체가 유지된다. 세션 객체가 메모리에 남게되어 메모리 부족 현상이 발생하게 된다. 👉 <strong>반드시 세션 타임아웃 시간을 지정해주어야 한다.</strong></ul></ol><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">session</span><span class="o">-</span><span class="n">config</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="n">session</span><span class="o">-</span><span class="n">timeout</span><span class="o">&gt;</span><span class="mi">50</span><span class="o">&lt;/</span><span class="n">session</span><span class="o">-</span><span class="n">timeout</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">session</span><span class="o">-</span><span class="n">config</span><span class="o">&gt;</span>  
</pre></table></code></div></div><ol><li>session 기본 객체의 <code class="language-plaintext highlighter-rouge">setMaxInactiveInterval()</code> 메소드를 사용한다. (값의 단위는 초다.)</ol><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">session</span><span class="o">.</span><span class="na">setMaxInactiveInterval</span><span class="o">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">);</span>
</pre></table></code></div></div><h3 id="requestgetsession-을-사용한-세션-생성">request.getSession() 을 사용한 세션 생성</h3><p><code class="language-plaintext highlighter-rouge">request.getSession()</code> 은 현재 요청과 관련된 session 객체를 리턴한다.</p><ul><li>page 디렉티브의 session 속성값은 false로 지정한다.<li>session이 이미 존재하면 해당 session을 리턴하고, 존재하지 않으면 새롭게 session을 생성해서 리턴한다.<li>false 인자를 전달하면 새롭게 생성된 경우에만 session 객체를 리턴한다. (아니면 null 리턴)</ul><h3 id="세션을-사용한-로그인-상태-유지">세션을 사용한 로그인 상태 유지</h3><ol><li>로그인에 성공하면 session 기본 객체의 특정 속성에 데이터를 기록한다.<li>이후로 session 기본 객체의 특정 속성이 존재하면 로그인한 것으로 간주한다.<li>로그아웃할 경우 session.invalidate() 메소드를 호출하여 세션을 종료한다.</ol><h2 id="쿠키와-세션-비교">쿠키와 세션 비교</h2><div class="table-wrapper"><table><thead><tr><th>쿠키<th>세션<tbody><tr><td>- 웹 브라우저에 보관한다<br />- 클라이언트의 로컬에 저장되기 때문에 보안에 취약하다.<br />- 만료 시간이 있지만 파일로 저장되기 때문에 브라우저를 종료해도 계속해서 정보가 남아있을 수 있다.<br />- 세션보다 더 빠르다.<td>- 서버에 보관한다<br />- 쿠키를 이용해서 sessionid만 저장하고 그것으로 구분해서 서버에서 처리하기 때문에 비교적 보안성이 좋다.<br />- 만료 시간이 있지만 브라우저가 종료되면 만료시간에 상관없이 삭제된다.<br />- 쿠키보다 더 느리다. 서버의 처리가 필요하기 때문이다.</table></div><h3 id="세션을-사용하면-좋은데-쿠키를-사용하는-이유">세션을 사용하면 좋은데 쿠키를 사용하는 이유</h3><p>세션은 서버에 보관되기 때문에 무분별하게 만들다보면 서버의 메모리가 감당할 수 없어지고 속도가 느려질 수 있기 때문이다.</p><h3 id="쿠키의-한계">쿠키의 한계</h3><h4 id="유실되기-쉽다">유실되기 쉽다</h4><p>대부분 브라우저는 환경 설정에서 쿠키 일괄 삭제 기능을 제공하며, 웹사이트 별로도 어렵지 않게 쿠키를 삭제할 수 있다.</p><h4 id="변조되기-쉽다">변조되기 쉽다</h4><p>브라우저의 개발자 도구를 사용하면 각 웹사이트 별로 현재 어떤 쿠키가 저장되어 있는지 한 눈에 파악할 수 있으며 쿠키를 손쉽게 변경할 수 있다.</p><h4 id="도난되기-쉽다">도난되기 쉽다</h4><p>클라이언트에 저장되어 있는 쿠키가 탈취되는 것을 서버 입장에서 막을 수 없다.</p><h3 id="쿠키의-대체기술">쿠키의 대체기술</h3><ul><li>대부분의 모던 브라우저는 로컬 스토리지나 세션 스토리지와 같은 쿠키를 대체할 수 있는 웹 스토리지 기술을 지원하고 있다.<li>웹 개발의 패러다임이 백엔드에서 프런트앤드로 옮겨오면서 예전보다 많은 코드가 서버가 아닌 브라우저에서 실행되고 있습니다. 그래서 굳이 브라우저에 저장되어 있는 데이터를 서버로 전송하지 않고도 자바스크립트로 해당 데이터에 쉽게 접근할 수 있게 되었다.</ul><p>이러한 웹 스토리지 기술에 비해서 쿠키의 최대 단점은 매 요청마다 같은 데이터가 서버로 전송됨에 따른 네트워크 대역폭 낭비이다.</p><h3 id="쿠키를-사용할-수-밖에-없는-이유">쿠키를 사용할 수 밖에 없는 이유</h3><p>이처럼 쿠키는 단점이 많지만 사용할 수 밖에 없는 이유는 HTTP 프로토콜은 연결을 유지시키지 않고(connectionless) 상태가 없는(stateless) 특성 때문이다.</p><p>쿠키를 사용하여 서버로 유입되는 요청 중에서 각각 어떤 사용자의 요청인지 판단할 수 있다.</p><h4 id="1-대규모-서비스에서-부하-분산">1. 대규모 서비스에서 부하 분산</h4><p>사용자들로부터 많은 요청이 들어올 때 여러 대의 서버를 사용하고, 이러한 서버 앞에는 로드 밸런서를 두어 여러 대의 서버로 부하가 분산될 수 있도록 한다. 만약 로그인한 서버와 다음 요청을 한 서버가 다르다면 그 서버에는 세션정보가 존재하지 않기 때문에 로그인 상태를 유지하기 어렵다. 이 때 <strong>서버의 ID를 쿠키로 지정</strong>하면, 로드밸런서는 이 서버 식별자를 보고 항상 동일한 서버로 요청을 보내줄 수 있다.</p><h4 id="2-세션-기반-사용자-인증">2. 세션 기반 사용자 인증</h4><p>서버에서 세션을 생성하면 그 세션을 식별할 수 있는 식별자 (세션 ID)를 얻는다. 이 <strong>세션ID를 쿠키로 설정</strong>하면 브라우저는 요청을 보낼 때마다 세션ID를 포함한 쿠키를 서버로 돌려보낸다. 서버에서는 이 세션ID에 해당하는 세션이 있는지 확인하면 된다.</p><h3 id="악용되는-쿠키">악용되는 쿠키</h3><h4 id="서드파티third-party-쿠키">서드파티(Third party) 쿠키</h4><ul><li>브라우저로 웹사이트에 접속할 때 그 웹사이트의 도메인이 아닌 타 도메인을 상대로 적용되는 쿠키이다.<li>보통 사용자 맞춤 광고를 위해서 사용자가 어떤 웹사이트를 방문하는지 추척하는 용도로 많이 사용이 되고 있다.</ul><h3 id="캐시란">캐시란?</h3><p>캐시는 쿠키와 세션과 다르다.</p><p>이미지, css, js 파일 등 리소스 파일들을 사용자의 PC에 저장해놓고 로드하게 해서 서버를 거치지 않아도 된다. 다시 사용할 때 빠르게 접근할 수 있어서 페이지 로딩 속도를 개선할 수 있다.</p><p>한 번 캐시에 저장되면 브라우저를 참고하기 때문에 서버에서 변경이 되어도 사용자는 변경되지 않게 보일 수 있다. 이 때 캐시를 직접 지워주거나, 서버에서 클라이언트로 응답을 보낼 때 header에 캐시 만료시간을 명시하는 방법 등이 있다.</p><h2 id="출처">출처</h2><ul><li>최범균의 JSP 2.3 웹 프로그래밍<li>https://interconnection.tistory.com/74<li>https://www.daleseo.com/http-cookies/</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/web-application/'>Web Application</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cookie/" class="post-tag no-text-decoration" >Cookie</a> <a href="/tags/session/" class="post-tag no-text-decoration" >Session</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Web] 쿠키와 세션 - 포스트잇&url=https://km-so-yeon.github.io/posts/Web-Cookie-Session/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Web] 쿠키와 세션 - 포스트잇&u=https://km-so-yeon.github.io/posts/Web-Cookie-Session/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Web] 쿠키와 세션 - 포스트잇&url=https://km-so-yeon.github.io/posts/Web-Cookie-Session/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Web-Jwt/">[Web] JWT</a><li><a href="/posts/Spring-ApplicationContext/">[Spring] ApplicationContext의 구현체</a><li><a href="/posts/Language-Lambda-Stream/">[Java] 람다(Lambda) 표현식과 스트림(Stream)</a><li><a href="/posts/CS-Design-Pattern-Structural/">[CS] 디자인패턴 - 구조패턴</a><li><a href="/posts/CS-Design-Pattern-Creational/">[CS] 디자인패턴 - 생성패턴</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/cs/">CS</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/cookie/">Cookie</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Web-springboot-login/"><div class="card-body"> <span class="timeago small" >Apr 7, 2022<i class="unloaded">2022-04-07T12:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[SpringBoot] 로그인 기능 구현하기(스프링 시큐리티)</h3><div class="text-muted small"><p> 로그인/로그아웃 구현 데이터베이스에서 회원 정보를 가져오는 역할 : UserDetailsService loadUserByUsername() : 회원 정보를 조회하여 사용자의 정보와 권한을 갖는 UserDetails 인터페이스를 반환 회원 정보를 담기 위해서 사용하는 인터페이스 : User...</p></div></div></a></div><div class="card"> <a href="/posts/Web-jpa-mapping/"><div class="card-body"> <span class="timeago small" >Apr 8, 2022<i class="unloaded">2022-04-08T12:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[JPA] 연관 관계 매핑</h3><div class="text-muted small"><p> 연관 관계 매핑 연관관계 매핑 종류 일대일(1:1) : @OneToOne 일대다(1:N) : @OneToMany 다대일(N:1) : @ManyToOne 다대다(N:N) : @ManyToMany 방향성 단방향 양방향 ...</p></div></div></a></div><div class="card"> <a href="/posts/Web-jpa-cascade/"><div class="card-body"> <span class="timeago small" >Apr 12, 2022<i class="unloaded">2022-04-12T11:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[JPA] 영속성 전이, 지연 로딩</h3><div class="text-muted small"><p> 영속성 전이 (cascade) 엔티티의 상태를 변경할 때 해당 엔티티와 연관된 엔티티의 상태 변화를 전파시키는 옵션 부모는 One, 자식은 Many 단일 엔티티에 완전히 종속적이고 부모 엔티티와 자식 엔티티의 라이프 사이클이 유사할 때 활용할 것 CASCADE 종류 PERSIST : 부모 엔티티가 영속화될 때 자식 엔티티도 영...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Language-Lambda-Stream/" class="btn btn-outline-primary" prompt="Older"><p>[Java] 람다(Lambda) 표현식과 스트림(Stream)</p></a> <a href="/posts/Language-Reflection/" class="btn btn-outline-primary" prompt="Newer"><p>[Java] Reflection</p></a></div><script src="https://utteranc.es/client.js" repo="km-so-yeon/km-so-yeon.github.io" issue-term="pathname" label="comments" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">김소연</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/cs/">CS</a> <a class="post-tag" href="/tags/web/">Web</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/jpa/">JPA</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/cookie/">Cookie</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://km-so-yeon.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
